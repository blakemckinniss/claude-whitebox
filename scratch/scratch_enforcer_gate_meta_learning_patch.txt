
# After line 11 (from scratch_enforcement import ...)
# Add:
from meta_learning import record_manual_bypass, record_sudo_bypass

# In main(), after bypass detection (around line 54):
        if action == "observe":
            # Bypass triggered - track as potential false positive
            if "MANUAL" in prompt:
                record_manual_bypass(
                    hook_name="scratch_enforcer",
                    context={"pattern": pattern_name, "tools": [tool_name]},
                    turn=turn,
                    reason="Manual override of scratch-first enforcement"
                )
                update_pattern_detection(pattern_name, 0, script_written=False, bypassed=True)
                log_telemetry(turn, pattern_name, "bypassed_manual", [tool_name])
            elif "SUDO MANUAL" in prompt:
                record_sudo_bypass(
                    hook_name="scratch_enforcer",
                    context={"pattern": pattern_name, "tools": [tool_name]},
                    turn=turn,
                    reason="SUDO override of scratch-first enforcement"
                )
